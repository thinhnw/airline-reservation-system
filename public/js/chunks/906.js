"use strict";(self.webpackChunkars=self.webpackChunkars||[]).push([[906],{6510:(t,r,e)=>{e.d(r,{Z:()=>o});var n=e(3645),a=e.n(n)()((function(t){return t[1]}));a.push([t.id,".checkout[data-v-67b67488]{padding-top:100px}.checkout[data-v-67b67488] .form-control{margin-bottom:0!important}input[type=text][data-v-67b67488]{border:1px solid #ccc;border-radius:3px;margin-bottom:20px;padding:12px;width:100%}label[data-v-67b67488]{display:block;margin-bottom:10px}",""]);const o=a},7906:(t,r,e)=>{e.r(r),e.d(r,{default:()=>E});var n=e(7757),a=e.n(n),o="https://js.stripe.com/v3",s=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,i="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",c=null,l=function(t){return null!==c?c:c=new Promise((function(r,e){if("undefined"!=typeof window)if(window.Stripe&&t&&console.warn(i),window.Stripe)r(window.Stripe);else try{var n=function(){for(var t=document.querySelectorAll('script[src^="'.concat(o,'"]')),r=0;r<t.length;r++){var e=t[r];if(s.test(e.src))return e}return null}();n&&t?console.warn(i):n||(n=function(t){var r=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",e=document.createElement("script");e.src="".concat(o).concat(r);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(e),e}(t)),n.addEventListener("load",(function(){window.Stripe?r(window.Stripe):e(new Error("Stripe.js not available"))})),n.addEventListener("error",(function(){e(new Error("Failed to load Stripe.js"))}))}catch(t){return void e(t)}else r(null)}))},u=function(t,r,e){if(null===t)return null;var n=t.apply(void 0,r);return function(t,r){t&&t._registerWrapper&&t._registerWrapper({name:"stripe-js",version:"1.17.1",startTime:r})}(n,e),n},d=Promise.resolve().then((function(){return l(null)})),p=!1;d.catch((function(t){p||console.warn(t)}));var m=function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];p=!0;var n=Date.now();return d.then((function(t){return u(t,r,n)}))},f=e(6826),v=e(4155);function b(t,r,e,n,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void e(t)}i.done?r(c):Promise.resolve(c).then(n,a)}function _(t){return function(){var r=this,e=arguments;return new Promise((function(n,a){var o=t.apply(r,e);function s(t){b(o,n,a,s,i,"next",t)}function i(t){b(o,n,a,s,i,"throw",t)}s(void 0)}))}}const h={data:function(){return{stripe:{},cardElement:{},payamentProcessing:!1,form:{reservation_id:"",txt_billing_fullname:"",txt_billing_email:"",txt_inv_addr1:"",txt_bill_city:"",txt_bill_country:"",txt_expire:""},reservation:null}},methods:{fetchProduct:function(){var t=this;return _(a().mark((function r(){var e,n,o,s;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(e=t.$route.query.reservation_id)||t.$router.push("home"),r.next=4,f.Z.get("/api/reservations/"+e);case 4:if(n=r.sent,o=n.data,!(s=n.error)){r.next=10;break}return console.error(s),r.abrupt("return");case 10:t.reservation=o.reservation,t.form.reservation_id=e;case 12:case"end":return r.stop()}}),r)})))()},processPayment:function(){var t=this;return _(a().mark((function r(){var e,n,o;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.paymentProcessing=!0,r.next=3,t.stripe.createPaymentMethod("card",t.cardElement,{billing_details:{name:t.form.txt_billing_fullname||"NGUYEN VAN A",email:t.form.txt_billing_email||"nvt0412@gmail.com",address:{line1:t.form.txt_inv_addr1||"Street 1",city:t.form.txt_bill_city||"Hanoi",state:t.form.txt_bill_state||"Hoang Mai",postal_code:t.form.zip_code}}});case 3:if(e=r.sent,n=e.paymentMethod,!(o=e.error)){r.next=10;break}return t.payamentProcessing=!1,alert(o),r.abrupt("return");case 10:return t.form.payment_method_id=n.id,t.form.amount=t.reservation.price,r.prev=12,r.next=15,f.Z.post("/api/reservations/checkout",t.form);case 15:r.sent,r.next=21;break;case 18:r.prev=18,r.t0=r.catch(12),console.error(r.t0);case 21:return r.prev=21,t.payamentProcessing=!1,r.finish(21);case 24:case"end":return r.stop()}}),r,null,[[12,18,21,24]])})))()},submit:function(){var t=this;return _(a().mark((function r(){var e;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.processPayment(),r.abrupt("return");case 6:e=r.sent,window.location.href=e.data.url,r.next=13;break;case 10:r.prev=10,r.t0=r.catch(2),console.error(r.t0);case 13:case"end":return r.stop()}}),r,null,[[2,10]])})))()}},mounted:function(){var t=this;return _(a().mark((function r(){var e;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.fetchProduct();case 2:return console.log(v.env.MIX_STRIPE_KEY),r.next=5,m(v.env.MIX_STRIPE_KEY);case 5:t.stripe=r.sent,e=t.stripe.elements(),t.cardElement=e.create("card",{classes:{base:"form-control py-2"}}),t.cardElement.mount("#card-element");case 9:case"end":return r.stop()}}),r)})))()}};var y=e(3379),w=e.n(y),g=e(6510),x={insert:"head",singleton:!1};w()(g.Z,x);g.Z.locals;const E=(0,e(1900).Z)(h,(function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("b-container",{staticClass:"checkout"},[e("b-row",[e("b-col",{attrs:{cols:"9"}},[e("b-card",{staticClass:"p-4",attrs:{"no-body":""}},[e("b-form",{on:{submit:function(r){return r.preventDefault(),t.submit.apply(null,arguments)}}},[e("section",[e("h4",{staticClass:"mb-4"},[t._v("Billing Address")]),t._v(" "),e("b-form-row",{staticClass:"mb-0"},[e("b-col",[e("b-form-group",[e("label",{attrs:{for:""}},[e("i",{staticClass:"fas fa-user"}),t._v("\n                    Full name\n                  ")]),t._v(" "),e("b-form-input",{attrs:{placeholder:"Enter your full name"}})],1)],1),t._v(" "),e("b-col",[e("b-form-group",[e("label",{attrs:{for:""}},[e("i",{staticClass:"fas fa-envelope mr-3"}),t._v("\n                    Email\n                  ")]),t._v(" "),e("b-form-input",{attrs:{placeholder:"Enter your email"}})],1)],1)],1),t._v(" "),e("b-form-row",{staticClass:"mb-0"},[e("b-col",[e("b-form-group",[e("label",{attrs:{for:""}},[t._v("\n                    Address\n                  ")]),t._v(" "),e("b-form-input",{attrs:{placeholder:"Enter your address"}})],1)],1),t._v(" "),e("b-col",[e("b-form-group",[e("label",{attrs:{for:""}},[t._v("\n                    City\n                  ")]),t._v(" "),e("b-form-input",{attrs:{placeholder:"Enter your city"}})],1)],1)],1),t._v(" "),e("b-form-row",[e("b-col",[e("b-form-group",[e("label",{attrs:{for:""}},[t._v("\n                    Country\n                  ")]),t._v(" "),e("b-form-input",{attrs:{placeholder:"Enter your country"}})],1)],1),t._v(" "),e("b-col",[e("b-form-group",[e("label",{attrs:{for:""}},[t._v("\n                    Postal code\n                  ")]),t._v(" "),e("b-form-input",{attrs:{placeholder:"Enter your postal code"}})],1)],1)],1)],1),t._v(" "),e("section",[e("h4",{staticClass:"mb-4"},[t._v("Payment")]),t._v(" "),e("b-form-group",[e("label",{attrs:{for:""}},[t._v("Name on card")]),t._v(" "),e("b-form-input",{attrs:{placeholder:"Eg: NGUYEN VAN A"}})],1),t._v(" "),e("b-form-group",[e("label",{attrs:{for:""}},[t._v("Credit Informations")]),t._v(" "),e("div",{attrs:{id:"card-element"}})])],1),t._v(" "),e("section",{staticClass:"py-3"},[e("b-button",{staticClass:"w-100",attrs:{type:"submit",variant:"primary",disabled:t.payamentProcessing}},[t._v("Checkout")])],1)])],1)],1),t._v(" "),e("b-col",{attrs:{cols:"3"}},[e("b-card",{staticClass:"p-4",attrs:{"no-body":""}},[e("h4",[t._v("Booking Summary")]),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"d-flex justity-content-between"},[e("div",[e("p",[t._v("Total")])]),t._v(" "),e("div",[e("p",[t._v(t._s(1e5)+" VND")])])])])],1)],1)],1)}),[],!1,null,"67b67488",null).exports}}]);